
<div class="container-fluid mt-5 pageIncidentmaster_fullview_section" id="incidentmasterpage" name="incidentmasterpage">
  <div class="container">
  <div class="createincidentmaster-title col-12 min-vh-50">
    <h6><strong>Create Incident</strong></h6>
  </div>
  <div class="card">
  <div class="card-body">
  
  
     <div class="row mb-3">
    
    <div class="col-md-10">
    
    </div>
       <div class="col-md-2  ">
       <div class="row">
       <div class="col-md-3"> 
       </div>
        <div class="col-md-3">
        </div>
       <div class="col-md-2">
         <label for="isincidentmasteractive">Active</label>
				<div class="custom-control custom-switch custom-switch-lg ">
					<input type="checkbox" class="custom-control-input" id="isincidentmasteractive" name="isincidentmasteractive" >
					<label class="custom-control-label" for="isincidentmasteractive"></label>
				</div>
          </div> 
          <div class="col-md-4">
          </div>
          </div>
        </div>
    </div>
  
	
	<div class="row">
		<div class="col-sm-8">
			<div class="form-group required">
				<label for="incidentmastername">Name</label>
				<input type="text" class="form-control rounded-pill  inputboxcolor" id="incidentmastername" placeholder="" name="incidentmastername" autocomplete="off">
			</div>
		</div>
        
        
       
        <div class="col-sm-4">
			 <div class="form-group">
            <label for="incidentmasterimage" >Image</label>
            <a class="form-control rounded-pill dropdown-toggle inputboxcolor" href="" id="incidentmasterimage"   name="incidentmasterimage" role="button"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            </a>
            <div class="form-group dropdown-menu dropdown-incident dropdown-menu-left" id="incidentmasterimagelist"
              aria-labelledby="dropdownMenuButton">
            </div>
          </div>
		</div>
    
		
	</div>


  <div class="row">
		
		<div class="col-sm-12">
			<div class="form-group required">
				<label for="incidentmasterautoreply">Help text</label>
				<textarea class="form-control rounded-pill tasize inputboxcolor" id="incidentmasterhelptext" placeholder=""name="incidentmasterhelptext" autocomplete="off"></textarea>
			</div>
		</div>
  </div>    
  
    <div class="row">
		
		<div class="col-sm-4">
			<div class="form-group required">
				<label for="incidentmasterissuesrelatedto">Issues Related to</label>
				<select class="form-control rounded-pill  inputboxcolor" id="incidentmasterissuesrelatedto" placeholder=""name="incidentmasterissuesrelatedto" autocomplete="off"></select>
			</div>
		</div>
        
        <div class="col-sm-4">
			<div class="form-group">
				<label for="incidentmasterdefaultpriority">Default Priority</label>
				<select class="form-control rounded-pill  inputboxcolor" id="incidentmasterdefaultpriority" placeholder=""name="incidentmasterdefaultpriority" autocomplete="off"></select>
			</div>
		</div>
         <div class="col-sm-4">
			<div class="form-group">
				<label for="incidentmasterdefaultrootcause">Default Root Cause</label>
				<select class="form-control rounded-pill  inputboxcolor" id="incidentmasterdefaultrootcause" placeholder=""name="incidentmasterdefaultrootcause" autocomplete="off"></select>
			</div>
		</div>
  </div>    
  
  
        <div class="row">
         <div class="col-md-4">
         <label for="isincidentmasterattachpicture">Attached Picture</label>
				<div class="custom-control custom-switch custom-switch-lg">
					<input type="checkbox" class="custom-control-input inputboxcolor" id="isincidentmasterattachpicture" name="isincidentmasterattachpicture" >
					<label class="custom-control-label" for="isincidentmasterattachpicture"></label>
				</div>
          </div> 
          
          <div class="col-md-4">
         <label for="isincidentmastermanagerreview">Manager Review</label>
				<div class="custom-control custom-switch custom-switch-lg">
					<input type="checkbox" class="custom-control-input inputboxcolor" id="isincidentmastermanagerreview" name="isincidentmastermanagerreview" >
					<label class="custom-control-label" for="isincidentmastermanagerreview"></label>
				</div>
          </div> 
          
          <div class="col-md-4">
         <label for="isincidentmasterotpdisplay">OTP Display</label>
				<div class="custom-control custom-switch custom-switch-lg">
					<input type="checkbox" class="custom-control-input inputboxcolor" id="isincidentmasterotpdisplay" name="isincidentmasterotpdisplay" >
					<label class="custom-control-label" for="isincidentmasterotpdisplay"></label>
				</div>
          </div> 
	</div>

  
  
  


  </div><!--< END class="card-body">  -->
</div>

<!--- Begin add for incidentmaster company ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmastercompanyrow">
        <div class="col-md-12" name="addincidentmastercompanycolumn">
            <label for="incidentmastercompany" class="required"> Incident Company</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmastercompanylistsearch" name="incidentmastercompanylistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search Company..." aria-label="Search company..." aria-describedby="incidentmastercompanylistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmastercompanylistadd"  name="incidentmastercompanylistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmastercompanylistdiv"  name="incidentmastercompanylistdiv">
               <ul id="incidentmastercompanylist" name="incidentmastercompanylist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster company --------------->

<!--- Begin add for incidentmaster BU ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmasterburow">
        <div class="col-md-12" name="addincidentmasterbucolumn">
            <label for="incidentmasterbu">Incident Business Unit</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmasterbulistsearch" name="incidentmasterbulistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search Businessunit..." aria-label="add bu..." aria-describedby="incidentmasterbulistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmasterbulistadd"  name="incidentmasterbulistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmasterbulistdiv"  name="incidentmasterbulistdiv">
               <ul id="incidentmasterbulist" name="incidentmasterbulist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster BU --------------->

<!--- Begin add for incidentmaster WL ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmasterwlrow">
        <div class="col-md-12" name="addincidentmasterwlcolumn">
            <label for="incidentmasterwl">Incident WorkLocation</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmasterwllistsearch" name="incidentmasterwllistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search Worklocation..." aria-label="add work location..." aria-describedby="incidentmasterwllistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmasterwllistadd"  name="incidentmasterwllistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmasterwllistdiv"  name="incidentmasterwllistdiv">
               <ul id="incidentmasterwllist" name="incidentmasterwllist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster WL --------------->
<!--- Begin add for incidentmaster module ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmastermodulerow">
        <div class="col-md-12" name="addincidentmastermodulecolumn">
            <label for="incidentmastermodule" class="required">Incident Module</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmastermodulelistsearch" name="incidentmastermodulelistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search Module..." aria-label="add module..." aria-describedby="incidentmastermodulelistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmastermodulelistadd"  name="incidentmastermodulelistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmastermodulelistdiv"  name="incidentmastermodulelistdiv">
               <ul id="incidentmastermodulelist" name="incidentmastermodulelist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster WL --------------->


<!--- Begin add for incidentmaster category ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmastercategoryrow">
        <div class="col-md-12" name="addincidentmastercategorycolumn">
            <label for="incidentmastercategory" class="required">Incident Category</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmastercategorylistsearch" name="incidentmastercategorylistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search category..." aria-label="Search category..." aria-describedby="incidentmastercategorylistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmastercategorylistadd"  name="incidentmastercategorylistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmastercategorylistdiv"  name="incidentmastercategorylistdiv">
               <ul id="incidentmastercategorylist" name="incidentmastercategorylist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster category --------------->



<!--- Begin add for incidentmaster sub-category ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmastersubcategoryrow">
        <div class="col-md-12" name="addincidentmastersubcategorycolumn">
            <label for="incidentmastersubcategory">Incident Sub-Category</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmastersubcategorylistsearch" name="incidentmastersubcategorylistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search sub-category..." aria-label="Search subcategory..." aria-describedby="incidentmastersubcategorylistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmastersubcategorylistadd"  name="incidentmastersubcategorylistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmastersubcategorylistdiv"  name="incidentmastersubcategorylistdiv">
               <ul id="incidentmastersubcategorylist" name="incidentmastersubcategorylist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster subcategory --------------->






<!--- Begin add for incidentmaster incident ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmasterserviceteamrow">
        <div class="col-md-12" name="addincidentmasterserviceteamcolumn">
            <label for="incidentmasterserviceteam">Incident Service Team</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmasterserviceteamlistsearch" name="incidentmasterserviceteamlistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search incident..." aria-label="add incident..." aria-describedby="incidentmasterserviceteamlistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmasterserviceteamlistadd"  name="incidentmasterserviceteamlistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmasterserviceteamlistdiv"  name="incidentmasterserviceteamlistdiv">
               <ul id="incidentmasterserviceteamlist" name="incidentmasterserviceteamlist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster incident --------------->



<!--- Begin add for incidentmaster knowledgebase ------------->
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmasterknowledgebaserow">
        <div class="col-md-12" name="addincidentmasterknowledgebasecolumn">
            <label for="incidentmasterknowledgebase">Related Knowledgebase Articles</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmasterknowledgebaselistsearch" name="incidentmasterknowledgebaselistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search knowledgebase..." aria-label="add knowledgebase..." aria-describedby="incidentmasterknowledgebaselistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmasterknowledgebaselistadd"  name="incidentmasterknowledgebaselistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmasterknowledgebaselistdiv"  name="incidentmasterknowledgebaselistdiv">
               <ul id="incidentmasterknowledgebaselist" name="incidentmasterknowledgebaselist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
<!--- End add for incidentmaster knowledgebase --------------->


<!--- Begin add for incidentmaster role ------------->

<!--
<div class="card mb-3">
  <div class="card-body">
    <div class="row" name="addincidentmasterrolerow">
        <div class="col-md-12" name="addincidentmasterrolecolumn">
            <label for="incidentmasterrole" class="required">Incident Role</label>
            <div class="input-group input-group-lg mb-2">
                  <input type="text" id="incidentmasterrolelistsearch" name="incidentmasterrolelistsearch" 
                         class="form-control rounded-pill inputboxcolor textboxfontsize" 
                          placeholder="Search role..." aria-label="Search role..." aria-describedby="incidentmasterrolelistadd">
                   <div class="input-group-append ">
                       <span class="input-group-text input-group-btn rounded-pill-right inputboxcolor" 
                             id="incidentmasterrolelistadd"  name="incidentmasterrolelistadd" style="display:none; curser:pointer" >
                            <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect width="23" height="23" rx="5" fill="#2D9CDB"/>
                              <path d="M10.98 6.58V10.92H6.74V12.46H10.98V16.78H12.68V12.46H16.94V10.92H12.68V6.58H10.98Z" fill="white"/>
							</svg>
                        </span>
                   </div>
             </div>
             <div id="incidentmasterrolelistdiv"  name="incidentmasterrolelistdiv">
               <ul id="incidentmasterrolelist" name="incidentmasterrolelist" class="px-0 py-0 textboxfontsize"></ul>
             </div>
          </div>
     </div>     
  </div>
</div>
-->
<!-- begin add save button here -->
<div class="">
  <div class="row mt-2">
       <!-- Start export data  -->
   <div class="col-md-3 "> 
       <div class="input-group pageIncidentmaster_view_section" style="display:none;">
          <button class="btn btn-primary  form-control custom-input float-right rounded-pill border-0" style="display:none;" id="Showincidentmasterusers"  name="Showincidentmasterusers">              
           Show Users  
          </button>
      </div>
      </div>
        <div class="col-md-6  my-1">
      </div>
       <!-- End export data  -->
      
        <div class="col-md-3">
          <div class="input-group pageIncidentmaster_save_section " style="display:none;">
            <button type="button" class="btn btn-primary  form-control custom-input float-right rounded-pill border-0" 
                    id="callcreateincidentmaster" 
                    name="callcreateincidentmaster" >Save
            </button>
          </div>
      </div>
  </div>
</div>

<!-- end add save button here ---->
          
 <!--   Export incidentmasters -->
  <div class=" "  >
   <div class="row  "   >  
    <div class="col-md-11">  
               </div>
        <div class="col-md-1 alignsvgright float-left">  
              <div class=" pageIncidentmaster_export_section float-right  " style="display:none;" title="Export to Excel">
                      <svg  type="button"   id="exportincidentmasterusertoexcel"  style="display:none;" name="exportincidentmasterusertoexcel" width="20" height="25" viewBox="0 0 22 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M0.522386 1.74993L0.519531 26.2482C0.519421 27.2105 1.30666 27.9979 2.26891 27.998L19.2824 28C20.245 28.0001 21.0326 27.2127 21.0328 26.2501L21.0351 6.44696C21.0351 5.90967 20.8217 5.39434 20.4419 5.01439L16.0235 0.594931C15.6436 0.214981 15.1284 0.00148226 14.5911 0.00142736L2.2727 1.14804e-08C1.31012 -0.000109785 0.522496 0.787348 0.522386 1.74993Z" fill="url(#paint0_linear_incidentmaster)"/>
                      <path d="M15.7675 11.2673H5.78808C5.17597 11.2673 4.67969 11.7642 4.67969 12.3763V22.8931C4.67969 23.5052 5.17597 24.0015 5.78808 24.0015H15.7675C16.3796 24.0015 16.8758 23.5052 16.8758 22.8931V12.3763C16.8758 11.7642 16.3796 11.2673 15.7675 11.2673ZM14.8288 15.0277H12.0013C11.7803 15.0277 11.6012 14.8486 11.6012 14.6276V13.3143C11.6012 13.0934 11.7803 12.9142 12.0013 12.9142H14.8288C15.0498 12.9142 15.2289 13.0934 15.2289 13.3143V14.6276C15.2289 14.8486 15.0498 15.0277 14.8288 15.0277ZM12.0013 16.6747H14.8288C15.0498 16.6747 15.2289 16.8538 15.2289 17.0748V18.1941C15.2289 18.4151 15.0498 18.5942 14.8288 18.5942H12.0013C11.7803 18.5942 11.6012 18.4151 11.6012 18.1941V17.0748C11.6012 16.8538 11.7804 16.6747 12.0013 16.6747ZM9.5542 18.5941H6.72667C6.50571 18.5941 6.32658 18.415 6.32658 18.194V17.0747C6.32658 16.8538 6.50571 16.6746 6.72667 16.6746H9.5542C9.77516 16.6746 9.9543 16.8538 9.9543 17.0747V18.194C9.9543 18.415 9.77516 18.5941 9.5542 18.5941ZM9.9543 13.3144V14.6277C9.9543 14.8487 9.77516 15.0278 9.5542 15.0278H6.72667C6.50571 15.0278 6.32658 14.8487 6.32658 14.6277V13.3144C6.32658 13.0934 6.50571 12.9143 6.72667 12.9143H9.5542C9.77516 12.9143 9.9543 13.0934 9.9543 13.3144ZM6.72667 20.2411H9.5542C9.77516 20.2411 9.9543 20.4202 9.9543 20.6412V21.9545C9.9543 22.1755 9.77516 22.3546 9.5542 22.3546H6.72667C6.50571 22.3546 6.32658 22.1755 6.32658 21.9545V20.6412C6.32663 20.4202 6.50576 20.2411 6.72667 20.2411ZM11.6012 21.9544V20.6411C11.6012 20.4202 11.7804 20.241 12.0013 20.241H14.8289C15.0498 20.241 15.229 20.4202 15.229 20.6411V21.9544C15.229 22.1754 15.0498 22.3545 14.8289 22.3545H12.0013C11.7804 22.3545 11.6012 22.1754 11.6012 21.9544Z" fill="#EBEFF0"/>
                      <path d="M20.9735 5.95413C20.98 5.9823 20.9859 6.00963 20.9914 6.03604H15.6307C15.2511 6.03604 14.9434 5.72834 14.9434 5.34872V0.0327148C14.9852 0.040181 15.0293 0.0489098 15.0747 0.0589561C15.4743 0.147342 15.8386 0.352826 16.1281 0.642193L20.3912 4.9053C20.6794 5.19357 20.8818 5.55694 20.9735 5.95413Z" fill="url(#paint1_linear_incidentmaster)"/>
                      <path d="M21.0347 24.5513V26.2487C21.0347 27.2112 20.2471 27.9988 19.2846 27.9988H2.27109C1.30878 27.9988 0.521484 27.2115 0.521484 26.2492V24.5513H21.0347Z" fill="url(#paint2_linear_incidentmaster)"/>
                      <defs>
                      <linearGradient id="paint0_linear_incidentmaster" x1="5.4076" y1="10.9157" x2="18.7256" y2="24.2336" gradientUnits="userSpaceOnUse">
                      <stop style="stop-color:#28A265"  />
                      <stop offset="1" style="stop-color:#28A265"  />
                      </linearGradient>
                      <linearGradient id="paint1_linear_incidentmaster" x1="15.6228" y1="3.22487" x2="18.0779" y2="5.68003" gradientUnits="userSpaceOnUse">
                      <stop style="stop-color:#91D1B2"  />
                      <stop offset="1"  style="stop-color:#28A265" />
                      </linearGradient>
                      <linearGradient id="paint2_linear_incidentmaster" x1="10.7781" y1="25.457" x2="10.7781" y2="28.1793" gradientUnits="userSpaceOnUse">
                      <stop   style="stop-color:#108372"  stop-opacity="0"/>
                      <stop offset="1"  style="stop-color:#108372" />
                      </linearGradient>
                      </defs>
                      </svg>
                      &nbsp;
              </div>
              
        </div>
      </div>
      
       <div class="row "   >  
    <div class="col   ">  
      
        <div class="table-responsive-xl  grid-container  " id="incidentmasteruserlist_toggle" name="incidentmasteruserlist_toggle"    >
            <table id="incidentmasteruserlist" name="incidentmasteruserlist" class=" bg-white summarytable   "  style="width:100%;  margin: 0;padding: 0">
            </table>
        </div>
   </div>
   </div>
  </div>
  
  <!-- End export incidentmasters -->
 
  
 </div> 
</div>
 

<script>


 
  
  
    $(document).on('click', '.dropdown-incident a', function () {
      $('#incidentmasterimage').html($(this).html())
    })

  

function show_loadimageonlyhere(loadlevel)
{
$( "#incidentmasterimagelist" ).html( loadlevel );
}





function show_Loadpriorityfromprioritymanagement(loadlevel)
{
$( "#incidentmasterdefaultpriority" ).html( loadlevel );
}

function show_Loadrootcausefromrootcausemanagement(loadlevel)
{
$( "#incidentmasterdefaultrootcause" ).html( loadlevel );
}

function show_loadrelatedissuesto(loadlevel)
{
$( "#incidentmasterissuesrelatedto" ).html( loadlevel );
}
// upload image here
   $("#uploadincidentmasterpicture").change(function(){
        incidentmasterreadURL(this);
    });
function incidentmasterreadURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#incidentmasterpicture').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
    }
    
    
    $( ".uploadincidentmasterimagenow" ).trigger( "click" );

}



 
    $(document).on('click','.uploadincidentmasterimagenow',function() {
if(this.parentNode!='')   
{

      progressboxOpen();
            google.script.run.withFailureHandler(incidentmaster_inError).withSuccessHandler(incidentmasterOfuploadfile).uploadincidentmasterfile(this.parentNode);
    }
    });
    
var _uploadedincidentmasterfilename;
function incidentmasterOfuploadfile(file)
{
_uploadedincidentmasterfilename=file;


      progressboxClose();

}


//function show_loadworkinghous(loadworkinghours)
//{
//$('#incidentmasterworkinghours').html(loadworkinghours);
//}
//
//function show_loadpositions(loadposiiton)
//{
//$('#incidentmasterposition').html(loadposiiton);
//}

 
    

//***** Toggle the export part***********
$("#Showincidentmasterusers").click(function(){
  $("#incidentmasteruserlist_toggle").toggle();
    $("#exportincidentmasterusertoexcel").toggle();
});



var incidentmastercompany_delete=[];  // need to predefine for get deleted items;




// For show and hide the add button
 $(document).on('blur keyup', '#incidentmastercompanylistsearch', function (e) {
    var iscoentered = $('#incidentmastercompanylistsearch').val();
    //alert(iscoentered )
    if(iscoentered!='')
    {
     $('#incidentmastercompanylistadd').show();
     $('#incidentmastercompanylistsearch').removeClass('rounded-pill');
     $('#incidentmastercompanylistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmastercompanylistadd').hide();
     $('#incidentmastercompanylistsearch').addClass('rounded-pill');
     $('#incidentmastercompanylistsearch').removeClass('rounded-pill-left');
    }
  });




 $(document).on('click', '#incidentmastercompanylistadd', function (e) {
 var dataarray=activecompany;
 var idarray=activecompanyid;
var addresult = addtoList('incidentmastercompany',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});





var incidentmastercategory_delete=[];  // need to predefine for get deleted items;




// For show and hide the add button
 $(document).on('blur keyup', '#incidentmastercategorylistsearch', function (e) {
    var iscoentered = $('#incidentmastercategorylistsearch').val();
    //alert(iscoentered )
    if(iscoentered!='')
    {
     $('#incidentmastercategorylistadd').show();
     $('#incidentmastercategorylistsearch').removeClass('rounded-pill');
     $('#incidentmastercategorylistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmastercategorylistadd').hide();
     $('#incidentmastercategorylistsearch').addClass('rounded-pill');
     $('#incidentmastercategorylistsearch').removeClass('rounded-pill-left');
    }
  });




 $(document).on('click', '#incidentmastercategorylistadd', function (e) {
 var dataarray=activecategory;
 var idarray=activecategoryid;
var addresult = addtoList('incidentmastercategory',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});



var incidentmastersubcategory_delete=[];  // need to predefine for get deleted items;




// For show and hide the add button
 $(document).on('blur keyup', '#incidentmastersubcategorylistsearch', function (e) {
    var iscoentered = $('#incidentmastersubcategorylistsearch').val();
    //alert(iscoentered )
    if(iscoentered!='')
    {
     $('#incidentmastersubcategorylistadd').show();
     $('#incidentmastersubcategorylistsearch').removeClass('rounded-pill');
     $('#incidentmastersubcategorylistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmastersubcategorylistadd').hide();
     $('#incidentmastersubcategorylistsearch').addClass('rounded-pill');
     $('#incidentmastersubcategorylistsearch').removeClass('rounded-pill-left');
    }
  });




 $(document).on('click', '#incidentmastersubcategorylistadd', function (e) {
 var dataarray=activesubcategory;
 var idarray=activesubcategoryid; 
var addresult = addtoList('incidentmastersubcategory',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});







 $(document).on('click', '#incidentmasterbulistadd', function (e) {
 var dataarray=activebu;
 var idarray=activebuid;
var addresult = addtoList('incidentmasterbu',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});


 $(document).on('click', '#incidentmasterwllistadd', function (e) {
 var dataarray=activeworklocation;
 var idarray=activeworklocationid;
var addresult = addtoList('incidentmasterwl',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});


 $(document).on('click', '#incidentmastermodulelistadd', function (e) {
 var dataarray=activemodule;
 var idarray=activemoduleid;
var addresult = addtoList('incidentmastermodule',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});




 $(document).on('click', '#incidentmasterserviceteamlistadd', function (e) {
 var dataarray=activeteam;
 var idarray=activeteamid;
 

var addresult = addtoList('incidentmasterserviceteam',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});



 $(document).on('click', '#incidentmasterknowledgebaselistadd', function (e) {
 var dataarray=activeknowledgebase;
 var idarray=activeknowledgebaseid;
 

var addresult = addtoList('incidentmasterknowledgebase',dataarray,idarray);
if(addresult == 'false')
{
toastboxOpen("2021");
}

});




// $(document).on('click', '#incidentmasterrolelistadd', function (e) {
// var dataarray=activerole;
// var idarray=activeroleid;
//
//var addresult = addtoList('incidentmasterrole',dataarray,idarray);
//if(addresult == 'false')
//{
//toastboxOpen("2021");
//}
//
//});







//business unit
var incidentmasterbu_delete=[];  // need to predefine for get deleted items;

// For show and hide the add button
 $(document).on('blur keyup', '#incidentmasterbulistsearch', function (e) {
    var isbuentered = $('#incidentmasterbulistsearch').val();
    
    if(isbuentered!='')
    {
     $('#incidentmasterbulistadd').show();
     $('#incidentmasterbulistsearch').removeClass('rounded-pill');
     $('#incidentmasterbulistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmasterbulistadd').hide();
     $('#incidentmasterbulistsearch').addClass('rounded-pill');
     $('#incidentmasterbulistsearch').removeClass('rounded-pill-left');
    }
  });

//worklocation
var incidentmasterwl_delete=[];  // need to predefine for get deleted items;

// For show and hide the add button
 $(document).on('blur keyup', '#incidentmasterwllistsearch', function (e) {
    var iswlentered = $('#incidentmasterwllistsearch').val();
    
    if(iswlentered!='')
    {
     $('#incidentmasterwllistadd').show();
     $('#incidentmasterwllistsearch').removeClass('rounded-pill');
     $('#incidentmasterwllistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmasterwllistadd').hide();
     $('#incidentmasterwllistsearch').addClass('rounded-pill');
     $('#incidentmasterwllistsearch').removeClass('rounded-pill-left');
    }
  });
  
  
  //worklocation
var incidentmastermodule_delete=[];  // need to predefine for get deleted items;

// For show and hide the add button
 $(document).on('blur keyup', '#incidentmastermodulelistsearch', function (e) {
    var iswlentered = $('#incidentmastermodulelistsearch').val();
    
    if(iswlentered!='')
    {
     $('#incidentmastermodulelistadd').show();
     $('#incidentmastermodulelistsearch').removeClass('rounded-pill');
     $('#incidentmastermodulelistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmastermodulelistadd').hide();
     $('#incidentmastermodulelistsearch').addClass('rounded-pill');
     $('#incidentmastermodulelistsearch').removeClass('rounded-pill-left');
    }
  });

//incidentmaster incident
var incidentmasterserviceteam_delete=[];  // need to predefine for get deleted items;

// For show and hide the add button
 $(document).on('blur keyup', '#incidentmasterserviceteamlistsearch', function (e) {
    var isincidententered = $('#incidentmasterserviceteamlistsearch').val();
    
    if(isincidententered!='')
    {
     $('#incidentmasterserviceteamlistadd').show();
     $('#incidentmasterserviceteamlistsearch').removeClass('rounded-pill');
     $('#incidentmasterserviceteamlistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmasterserviceteamlistadd').hide();
     $('#incidentmasterserviceteamlistsearch').addClass('rounded-pill');
     $('#incidentmasterserviceteamlistsearch').removeClass('rounded-pill-left');
    }
  });



//incidentmaster knowledgebase
var incidentmasterknowledgebase_delete=[];  // need to predefine for get deleted items;

// For show and hide the add button
 $(document).on('blur keyup', '#incidentmasterknowledgebaselistsearch', function (e) {
    var isknowledgebaseentered = $('#incidentmasterknowledgebaselistsearch').val();
    
    if(isknowledgebaseentered!='')
    {
     $('#incidentmasterknowledgebaselistadd').show();
     $('#incidentmasterknowledgebaselistsearch').removeClass('rounded-pill');
     $('#incidentmasterknowledgebaselistsearch').addClass('rounded-pill-left');
    }else
    {
     $('#incidentmasterknowledgebaselistadd').hide();
     $('#incidentmasterknowledgebaselistsearch').addClass('rounded-pill');
     $('#incidentmasterknowledgebaselistsearch').removeClass('rounded-pill-left');
    }
  });




//incidentmaster role
//var incidentmasterrole_delete=[];  // need to predefine for get deleted items;
//
//// For show and hide the add button
// $(document).on('blur keyup', '#incidentmasterrolelistsearch', function (e) {
//    var isownerentered = $('#incidentmasterrolelistsearch').val();
//    
//    if(isownerentered!='')
//    {
//     $('#incidentmasterrolelistadd').show();
//     $('#incidentmasterrolelistsearch').removeClass('rounded-pill');
//     $('#incidentmasterrolelistsearch').addClass('rounded-pill-left');
//    }else
//    {
//     $('#incidentmasterrolelistadd').hide();
//     $('#incidentmasterrolelistsearch').addClass('rounded-pill');
//     $('#incidentmasterrolelistsearch').removeClass('rounded-pill-left');
//    }
//  });





</script>


<script>


//Used for make viewdetail div disable
var pageIncidentmaster_viewdetails = false;
var incidentmasterid='';
 
 $('#incidentmasteruserlist').hide();

 
 
 function getincidentmasterrecorddata(valueof)
{
  $('.removelist_incidentmastercompany').remove(); // remove existing list
          $('.removelist_incidentmasterbu').remove(); // remove existing list
          $('.removelist_incidentmasterwl').remove(); // remove existing list
          $('.removelist_incidentmastermodule').remove(); // remove existing list
          $('.removelist_incidentmasterserviceteam').remove(); // remove existing list
         $('.removelist_incidentmasterknowledgebase').remove(); // remove existing list
          $('.removelist_incidentmastercategory').remove(); // remove existing list
          $('.removelist_incidentmastersubcategory').remove(); // remove existing list
          $('.removelist_incidentmasterserviceteam').remove(); // remove existing list
$('.createincidentmaster-title').html('<h6><strong>Update Incident</strong></h6>');
 incidentmasterid=valueof.incidentmasterid[0];
 $('#incidentmastername').val(valueof.data[incidentmasterid].name);
  $('#incidentmasterhelptext').val(valueof.data[incidentmasterid].helptext);
$('#incidentmasterimage').html("<img src='" + valueof.data[incidentmasterid].url + "'style='width: 30px; height: 30px'>");
 $('#incidentmasterissuesrelatedto').val(valueof.data[incidentmasterid].issuerelatedto);
 $('#incidentmasterdefaultpriority').val(valueof.data[incidentmasterid].defaultpriority);
 $('#incidentmasterdefaultrootcause').val(valueof.data[incidentmasterid].defaultrootcause);


var statusval=valueof.data[incidentmasterid].status;
if(statusval == 'true')
    {
    $('#isincidentmasteractive').prop('checked',  true);
    }
else
if(statusval == 'false')
    {
    $('#isincidentmasteractive').prop('checked',  false);
    }


var attachedpicture=valueof.data[incidentmasterid].attachedpicture;
if(attachedpicture == 'true')
    {
    $('#isincidentmasterattachpicture').prop('checked',  true);
    }
else
if(attachedpicture == 'false')
    {
    $('#isincidentmasterattachpicture').prop('checked',  false);
    }
    
    var needmanagerreview=valueof.data[incidentmasterid].needmanagerreview;
if(needmanagerreview == 'true')
    {
    $('#isincidentmastermanagerreview').prop('checked',  true);
    }
else
if(needmanagerreview == 'false')
    {
    $('#isincidentmastermanagerreview').prop('checked',  false);
    }
    
        var otpdisplay = valueof.data[incidentmasterid].otpdisplay;
if(otpdisplay == 'true')
    {
    $('#isincidentmasterotpdisplay').prop('checked',  true);
    }
else
if(otpdisplay == 'false')
    {
    $('#isincidentmasterotpdisplay').prop('checked',  false);
    }
    
    
    
var incidentmastercategory=valueof.data[incidentmasterid].category;
for (var d=0;d<incidentmastercategory.length; d++)
{
updatetoList(incidentmastercategory[d],'incidentmastercategory');
}


var incidentmastersubcategory=valueof.data[incidentmasterid].subcategory;
for (var d=0;d<incidentmastersubcategory.length; d++)
{
updatetoList(incidentmastersubcategory[d],'incidentmastersubcategory');
}

    
var incidentmastercompany=valueof.data[incidentmasterid].company;

for (var d=0;d<incidentmastercompany.length; d++)
{
updatetoList(incidentmastercompany[d],'incidentmastercompany');
}



  var incidentmasterbusinessunit=valueof.data[incidentmasterid].businessunit;

for (var d=0;d<incidentmasterbusinessunit.length; d++)
{
updatetoList(incidentmasterbusinessunit[d],'incidentmasterbu');
}

//alert('3')


var incidentmasterwl=valueof.data[incidentmasterid].worklocation;
for (var d=0;d<incidentmasterwl.length; d++)
{
updatetoList(incidentmasterwl[d],'incidentmasterwl');
}

//alert('6')

var incidentmastermodules=valueof.data[incidentmasterid].module;
for (var d=0;d<incidentmastermodules.length; d++)
{
//alert(incidentmasterowner[d])

//alert(JSON.stringify(incidentmasterowner[d]))
updatetoList(incidentmastermodules[d],'incidentmastermodule');
}

//alert('4')


var incidentmasterserviceteam=valueof.data[incidentmasterid].serviceteam;
for (var d=0;d<incidentmasterserviceteam.length; d++)
{
updatetoList(incidentmasterserviceteam[d],'incidentmasterserviceteam');
}

var incidentmasterknowledgebase=valueof.data[incidentmasterid].knowledgebase;
for (var d=0;d<incidentmasterknowledgebase.length; d++)
{
updatetoList(incidentmasterknowledgebase[d],'incidentmasterknowledgebase');
}


$('#Showincidentmasterusers').show();

  pageIncidentmasterexport(valueof);
  page_show('pageIncidentmastermanagement','pageIncidentmaster')
pageIncidentmasteractioncontrol();
progressboxClose();


}
       
       
       
       
        var incidentmaster_caninactive='No';
$(document).on('click','#callcreateincidentmaster',function(e) {
incidentmaster_caninactive='No';
saveincidentmasterdetails(incidentmaster_caninactive);
});
$(document).on('click','.pageIncidentmaster_confirm',function(e) {
incidentmaster_caninactive='Yes';
saveincidentmasterdetails(incidentmaster_caninactive);
confirmationboxClose();
});
    
       
       
//Create new incidentmaster
function saveincidentmasterdetails(incidentmaster_caninactive)
{
//read all dependant items
var  incidentmastercompany=read_incidentmastercompany(); 
var  incidentmastercategory=read_incidentmastercategory(); 
var  incidentmastersubcategory=read_incidentmastersubcategory(); 

var  incidentmasterbusinessunit=read_incidentmasterbusinessunit();  
var  incidentmasterworklocation=read_incidentmasterworklocation();  
//var  incidentmasterrole=read_incidentmasterrole();  
var  incidentmastermodule=read_incidentmastermodule();  
var  incidentmasterserviceteam=read_incidentmasterserviceteam();  
var  knownissueknowledgebase=read_incidentmasterknowledgebase();  



 
       
var incidentmasteruseractiveresults=[];
var  incidentmastername=$('#incidentmastername').val();
      var incidentmasterimage = $('#incidentmasterimage img').prop('src');
var isincidentmasteractive = $('#isincidentmasteractive').prop('checked');
var attachedpicture = $('#isincidentmasterattachpicture').prop('checked');


var issuerelatedto = $('#incidentmasterissuesrelatedto').val();
var defaultpriority = $('#incidentmasterdefaultpriority').val();
var defaultrootcause = $('#incidentmasterdefaultrootcause').val();
var needmanagerreview = $('#isincidentmastermanagerreview').prop('checked');
var otpdisplay = $('#isincidentmasterotpdisplay').prop('checked');

var incidentmasterhelptext = $('#incidentmasterhelptext').val();


        
        

		var _incidentmasterparams = {
			"action"  : "incidentmaster_maintain",
			"param"   : {"id":incidentmasterid
                       ,"name" : incidentmastername.trim()
                       ,"helptext" : incidentmasterhelptext
                       ,"image" : incidentmasterimage
                       ,"attachedpicture" : attachedpicture
                       ,"issuerelatedto" : issuerelatedto
                       ,"needmanagerreview" : needmanagerreview
                       ,"otpdisplay" : otpdisplay
                       ,"defaultpriority" : defaultpriority
                       ,"defaultrootcause" : defaultrootcause
                       ,"status" : isincidentmasteractive
                       ,"company" : {"info": incidentmastercompany, "deleteinfo":incidentmastercompany_delete }
                       ,"businessunit" : {"info": incidentmasterbusinessunit, "deleteinfo":incidentmasterbu_delete } 
                       ,"worklocation" :  {"info": incidentmasterworklocation, "deleteinfo":incidentmasterwl_delete } 
                       ,"module" :  {"info": incidentmastermodule, "deleteinfo":incidentmastermodule_delete }  
                       ,"incident" :  {"info": incidentmasterserviceteam, "deleteinfo":incidentmasterserviceteam_delete } 
                      ,"knowledgebase" :  {"info": knownissueknowledgebase, "deleteinfo":incidentmasterknowledgebase_delete }   
                       ,"category" :  {"info": incidentmastercategory, "deleteinfo":incidentmastercategory_delete } 
                       ,"subcategory" :  {"info": incidentmastersubcategory, "deleteinfo":incidentmastersubcategory_delete }     
                       ,"createby":_getloginname
                       ,"caninactive":incidentmaster_caninactive
                       }
			};
            

   if( validateBeforeSubmit(incidentmastername) == 'true' && issuerelatedto!='' && incidentmasterhelptext != "" && incidentmastercompany.length > 0  && incidentmastercategory.length > 0  && incidentmastermodule.length > 0 )
     {
      progressboxOpen();
      google.script.run.withFailureHandler(incidentmaster_inError).withSuccessHandler(incidentmasterconfirmation).executeincidentmaster(_incidentmasterparams) 
      }
      else
      {
      toastboxOpen("2008")
      }
            
            
}






 function incidentmasterconfirmation(result) {
  if(isNaN(result.result['code']) == false)
{
    if (result.result['code'] == '3000') {
    incidentmastercompany_delete=[];
    incidentmasterbu_delete=[];
    incidentmasterwl_delete=[];
        incidentmastermodule_delete=[];
    incidentmasterserviceteam_delete=[];
        incidentmasterknowledgebase_delete=[];
        incidentmastercategory_delete=[];
                incidentmastersubcategory_delete=[];
//    incidentmasterrole_delete=[];

          $('.removelist_incidentmastercompany').remove(); // remove existing list
          $('.removelist_incidentmasterbu').remove(); // remove existing list
          $('.removelist_incidentmasterwl').remove(); // remove existing list
          $('.removelist_incidentmastermodule').remove(); // remove existing list
          $('.removelist_incidentmasterserviceteam').remove(); // remove existing list
          $('.removelist_incidentmasterknowledgebase').remove(); // remove existing list
          $('.removelist_incidentmastercategory').remove(); // remove existing list
          $('.removelist_incidentmastersubcategory').remove(); // remove existing list
//          $('.removelist_incidentmasterrole').remove(); // remove existing list
//      $('#worklocationpage *').val('');
        incidentmasterid='';
        incidentmaster_actionfromwhere='afterupdate';
         retrive_allincidentmasterdetails(result)
      pageIncidentmasteractioncontrol();
          page_show('pageIncidentmaster','pageIncidentmastermanagement')
      }
    else
      if(result.result['code'] == '2016')
      {
           progressboxClose();
           confirmationboxOpen(2016,"pageIncidentmaster_confirm");
      }
      else
      {
          progressboxClose();
         toastboxOpen(result.result['code']);
      }
      }
    else {
      toastboxOpen("2007");
    }

  }


// Show error message
function incidentmaster_errormessage(err)
{
          progressboxClose();
            toastboxOpen("3002");
}
</script>

<script>
// Control the page action.
function pageIncidentmasteractioncontrol()
{
pageIncidentmaster_viewdetails=page_actioncontrol("pageIncidentmaster","SAVE");
//Div disabled based on the condition 
if(pageIncidentmaster_viewdetails == false){$(".pageIncidentmaster_fullview_section *").attr('disabled','disabled');}
else{    $(".pageIncidentmaster_fullview_section *").prop("disabled", false);}
}



</script>




<script>




$(document).on('keypress','#incidentmasterwllistsearch',function(e) {

autocomplete(document.getElementById("incidentmasterwllistsearch"), activeworklocation);
});

$(document).on('keypress','#incidentmastermodulelistsearch',function(e) {

autocomplete(document.getElementById("incidentmastermodulelistsearch"), activemodule);
});

$(document).on('keypress','#incidentmasterbulistsearch',function(e) {

autocomplete(document.getElementById("incidentmasterbulistsearch"), activebu);
});


$(document).on('keypress','#incidentmastercompanylistsearch',function(e) {

autocomplete(document.getElementById("incidentmastercompanylistsearch"), activecompany);
});

$(document).on('keypress','#incidentmastercategorylistsearch',function(e) {

autocomplete(document.getElementById("incidentmastercategorylistsearch"), activecategory);
});

$(document).on('keypress','#incidentmastersubcategorylistsearch',function(e) {
autocomplete(document.getElementById("incidentmastersubcategorylistsearch"), activesubcategory);
});

//$(document).on('keypress','#incidentmasterrolelistsearch',function(e) {
//autocomplete(document.getElementById("incidentmasterrolelistsearch"), activerole);
//});


$(document).on('keypress','#incidentmasterserviceteamlistsearch',function(e) {
//Loadteamfromteammanagement()
autocomplete(document.getElementById("incidentmasterserviceteamlistsearch"), activeteam);
});



$(document).on('keypress','#incidentmasterknowledgebaselistsearch',function(e) {
//Loadknowledgebasefromknowledgebasemanagement()
autocomplete(document.getElementById("incidentmasterknowledgebaselistsearch"), activeknowledgebase);
});
//company
$(document).on('click', '.incidentmastercompany_deletelistitem', function () {

var getid=$(this).attr('id');

var getdeletedata =  getdeleteitem(getid,'incidentmastercompany');

incidentmastercompany_delete.push(getdeletedata)
	    });

//bu
$(document).on('click', '.incidentmasterbu_deletelistitem', function () {

var getid=$(this).attr('id');

var getdeletedata =  getdeleteitem(getid,'incidentmasterbu');
incidentmasterbu_delete.push(getdeletedata) 
	    });

//wl
$(document).on('click', '.incidentmasterwl_deletelistitem', function () {
var getid=$(this).attr('id');
var getdeletedata  =  getdeleteitem(getid,'incidentmasterwl')
incidentmasterwl_delete.push(getdeletedata)
	    });

//wl
$(document).on('click', '.incidentmastermodule_deletelistitem', function () {
var getid=$(this).attr('id');
var getdeletedata= getdeleteitem(getid,'incidentmastermodule');
incidentmastermodule_delete.push(getdeletedata)
	    });

//incident
$(document).on('click', '.incidentmasterserviceteam_deletelistitem', function () {

var getid=$(this).attr('id');
var getdeletedata = getdeleteitem(getid,'incidentmasterserviceteam');
incidentmasterserviceteam_delete.push(getdeletedata);
	    });

//knowledgebase
$(document).on('click', '.incidentmasterknowledgebase_deletelistitem', function () {

var getid=$(this).attr('id');
var getdeletedata = getdeleteitem(getid,'incidentmasterknowledgebase');
incidentmasterknowledgebase_delete.push(getdeletedata);
	    });



//$(document).on('click', '.incidentmasterrole_deletelistitem', function () {
//
//var getid=$(this).attr('id');
//var getdeletedata = getdeleteitem(getid,'incidentmasterrole');
//incidentmasterrole_delete.push(getdeletedata)
//	    });


$(document).on('click', '.incidentmastercategory_deletelistitem', function () {

var getid=$(this).attr('id');
var getdeletedata = getdeleteitem(getid,'incidentmastercategory');
incidentmastercategory_delete.push(getdeletedata)
	    });
        
        $(document).on('click', '.incidentmastersubcategory_deletelistitem', function () {

var getid=$(this).attr('id');
var getdeletedata = getdeleteitem(getid,'incidentmastersubcategory');
incidentmastersubcategory_delete.push(getdeletedata)
	    });



//Read all dependency
function read_incidentmastercategory()
{
  var incidentmastercategoryvalues=[];
  var _mclength = $('#incidentmastercategorylist li').length
  var _mcdeletelength = incidentmastercategory_delete.length;
  var _mcfulllength = parseInt(_mclength)+parseInt(_mcdeletelength);

  for (var l = 0; l < _mcfulllength; l++) {
  
      var _mcdata = $("#incidentmastercategorylisttextid_"+ l).val();
      var _mcid   = $("#incidentmastercategorylistupdateid_"+ l).val();
      if(_mcdata!='' && _mcdata!=undefined && _mcdata!='undefined')
      {
          incidentmastercategoryvalues.push( {
            "id"         : _mcid,
            "value"      : _mcdata
            })
  
      }
  }
  return incidentmastercategoryvalues;
}



//Read all dependency
function read_incidentmastersubcategory()
{
  var incidentmastersubcategoryvalues=[];
  var _mclength = $('#incidentmastersubcategorylist li').length
  var _mcdeletelength = incidentmastersubcategory_delete.length;
  var _mcfulllength = parseInt(_mclength)+parseInt(_mcdeletelength);

  for (var l = 0; l < _mcfulllength; l++) {
  
      var _mcdata = $("#incidentmastersubcategorylisttextid_"+ l).val();
      var _mcid   = $("#incidentmastersubcategorylistupdateid_"+ l).val();
      if(_mcdata!='' && _mcdata!=undefined && _mcdata!='undefined')
      {
          incidentmastersubcategoryvalues.push( {
            "id"         : _mcid,
            "value"      : _mcdata
            })
  
      }
  }
  return incidentmastersubcategoryvalues;
}


//Read all dependency
function read_incidentmastercompany()
{
  var incidentmastercompanyvalues=[];
  var _mclength = $('#incidentmastercompanylist li').length
  var _mcdeletelength = incidentmastercompany_delete.length;
  var _mcfulllength = parseInt(_mclength)+parseInt(_mcdeletelength);

//alert(parseInt(_mclength))
//alert(parseInt(_mcdeletelength))
//alert(_mcfulllength)

  for (var l = 0; l < _mcfulllength; l++) {
  
//  alert(l+"___count")
      var _mcdata = $("#incidentmastercompanylisttextid_"+ l).val();
//      alert(_mcdata)
      var _mcid   = $("#incidentmastercompanylistupdateid_"+ l).val();
      if(_mcdata!='' && _mcdata!=undefined && _mcdata!='undefined')
      {
          incidentmastercompanyvalues.push( {
            "id"         : _mcid,
            "value"      : _mcdata
            })
  
      }
  }
  
  return incidentmastercompanyvalues;
}


//load bu list
function read_incidentmasterbusinessunit()
{
  var incidentmasterbuvalues=[];
  var _mbulength = $('#incidentmasterbulist li').length
  var _mbudeletelength = incidentmasterbu_delete.length;
  var _mbufulllength = parseInt(_mbulength)+parseInt(_mbudeletelength);

  for (var l = 0; l < _mbufulllength; l++) {
  
      var _mbudata = $("#incidentmasterbulisttextid_"+ l).val();
      var _mbuid   = $("#incidentmasterbulistupdateid_"+ l).val();
      if(_mbudata!='' && _mbudata!=undefined && _mbudata!='undefined')
      {
          incidentmasterbuvalues.push( {
            "id"         : _mbuid,
            "value"      : _mbudata
            })
      }
  }
  return incidentmasterbuvalues;
}


//load WL list
function read_incidentmasterworklocation()
{
  var incidentmasterwlvalues=[];
  var _mwllength = $('#incidentmasterwllist li').length
  var _mwldeletelength = incidentmasterwl_delete.length;
  var _mwlfulllength = parseInt(_mwllength)+parseInt(_mwldeletelength);

  for (var l = 0; l < _mwlfulllength; l++) {
  
      var _mwldata = $("#incidentmasterwllisttextid_"+ l).val();
      var _mwlid   = $("#incidentmasterwllistupdateid_"+ l).val();
      if(_mwldata!='' && _mwldata!=undefined && _mwldata!='undefined')
      {
          incidentmasterwlvalues.push( {
            "id"         : _mwlid,
            "value"      : _mwldata
            })
  
      }
  }
  return incidentmasterwlvalues;
}


//load Module list
function read_incidentmastermodule()
{
  var incidentmastermodulevalues=[];
  var _mwllength = $('#incidentmastermodulelist li').length
  var _mwldeletelength = incidentmastermodule_delete.length;
  var _mwlfulllength = parseInt(_mwllength)+parseInt(_mwldeletelength);

  for (var l = 0; l < _mwlfulllength; l++) {
  
      var _mwldata = $("#incidentmastermodulelisttextid_"+ l).val();
      var _mwlid   = $("#incidentmastermodulelistupdateid_"+ l).val();
      if(_mwldata!='' && _mwldata!=undefined && _mwldata!='undefined')
      {
          incidentmastermodulevalues.push( {
            "id"         : _mwlid,
            "value"      : _mwldata
            })
  
      }
  }
  return incidentmastermodulevalues;
}



//load incidentmaster list
function read_incidentmasterserviceteam()
{
  var incidentmasterwlvalues=[];
  var _mwllength = $('#incidentmasterserviceteamlist li').length
  var _mwldeletelength = incidentmasterserviceteam_delete.length;
  var _mwlfulllength = parseInt(_mwllength)+parseInt(_mwldeletelength);

  for (var l = 0; l < _mwlfulllength; l++) {
  
      var _mwldata = $("#incidentmasterserviceteamlisttextid_"+ l).val();
      var _mwlid   = $("#incidentmasterserviceteamlistupdateid_"+ l).val();
      if(_mwldata!='' && _mwldata!=undefined && _mwldata!='undefined')
      {
          incidentmasterwlvalues.push( {
            "id"         : _mwlid,
            "value"      : _mwldata
            })
  
      }
  }
  return incidentmasterwlvalues;
}




//load incidentmaster list
function read_incidentmasterknowledgebase()
{
  var incidentmasterwlvalues=[];
  var _mwllength = $('#incidentmasterknowledgebaselist li').length
  var _mwldeletelength = incidentmasterknowledgebase_delete.length;
  var _mwlfulllength = parseInt(_mwllength)+parseInt(_mwldeletelength);

  for (var l = 0; l < _mwlfulllength; l++) {
  
      var _mwldata = $("#incidentmasterknowledgebaselisttextid_"+ l).val();
      var _mwlid   = $("#incidentmasterknowledgebaselistupdateid_"+ l).val();
      if(_mwldata!='' && _mwldata!=undefined && _mwldata!='undefined')
      {
          incidentmasterwlvalues.push( {
            "id"         : _mwlid,
            "value"      : _mwldata
            })
  
      }
  }
  return incidentmasterwlvalues;
}


//load incidentmaster list
//function read_incidentmasterrole()
//{
//  var incidentmasterwlvalues=[];
//  var _mwllength = $('#incidentmasterrolelist li').length
//  var _mwldeletelength = incidentmasterrole_delete.length;
//  var _mwlfulllength = parseInt(_mwllength)+parseInt(_mwldeletelength);
//
//  for (var l = 0; l < _mwlfulllength; l++) {
//  
//      var _mwldata = $("#incidentmasterrolelisttextid_"+ l).val();
//      var _mwlid   = $("#incidentmasterrolelistupdateid_"+ l).val();
//      if(_mwldata!='' && _mwldata!=undefined && _mwldata!='undefined')
//      {
//          incidentmasterwlvalues.push( {
//            "id"         : _mwlid,
//            "value"      : _mwldata
//            })
//  
//      }
//  }
//  return incidentmasterwlvalues;
//}


$(document).on('keypress','#incidentmastername',function(e) {
autocomplete(document.getElementById("incidentmastername"), incidentmasternameavailable);
});


$(document).on('keypress','#incidentmasterid',function(e) {

autocomplete(document.getElementById("incidentmasterid"), incidentmasterprefixavailable);
});



</script>

<style>

.alignsvgright {
  text-align: left;            
  margin-left: 0px;
}

.resizetablebackground {
  margin-top: 0px;
  padding-top:0px
}

.reducebuttonsize {
   height:2px;
   margin-bottom: 0px;
  margin-top: 0px;
  margin-left: 0px;
padding-bottom:0px
}



.dt-buttons {
   height:10px;
}


</style>


<script>
var addincidentmasteruser;
//$('#exportroleusertoexcel').hide();

//Show the user details in this table 
//$(document).on('click','#Showroleusers',function(e) {
   var incidentmasteruseractiveresults=[];

 function pageIncidentmasterexport(valueof)
 {
incidentmasterid= valueof.incidentmasterid[0];
            if(incidentmasterid!='' )  
            {
             var incidentmasteruserresults=[];
             incidentmasteruseractiveresults=[];
              if(valueof!= '')
              {
                 var selectedincidentmasterrole=valueof.data[incidentmasterid].user;//.roleuser[0]
                      for (var x = 0; x < selectedincidentmasterrole.length; x++) {   
                      incidentmasteruserresults.push([
                      selectedincidentmasterrole[x].username,
                      selectedincidentmasterrole[x].useremail,
                      selectedincidentmasterrole[x].userlocked,
                      selectedincidentmasterrole[x].userstatus,
                      selectedincidentmasterrole[x].userlocked,
                      selectedincidentmasterrole[x].userstatus,
                      ])
                      
                     
                      };
                      
              }
              
            var incidentmastertableid="incidentmasteruserlist";
            addincidentmasteruser = $('#incidentmasteruserlist').DataTable({
            dom: 'Bfrtip',
                "ordering": true,  
                "pageLength": 5,
                "bLengthChange": false, //disable the dropdown
                "bRetrieve": true,
                destroy: true,
                dom: 'Bfrtip',

buttons: [{
            extend: 'excelHtml5',
            className: "incidentmasterbuttonsTocall reducebuttonsize",
             exportOptions: {
             
         columns: [0,1, 4, 5]

//      format: {
//         body: function ( data, row, column, node ) {
//            switch (column) {
//              case 2 :
//                return rolevalsplit[2];
//                break
//              case 3 : 
//                return rolevalsplit[3];
//                break
//              default :
//                return data;
//                break
//             }
//          }
//        }    
     },
        }],


               "bFilter": false,
                rowId: 'id', 
                data: incidentmasteruserresults,
                columns: [{
                    title: " Name" 
                }, {
                    title: "Email"
                }, 
                {
                    title: "Locked",
                    className: 'isLocked',
                    orderable: false,
                    data: null,
                    "render": function (data, type, full, meta) {
                        var islocked = full[2];
                        
                        
                         if (islocked == 'true') {
                        var isincidentmasterlocked="isincidentmasterlocked"+full[0];
                            return '<div class="custom-control custom-switch">' +
                                '<input type="checkbox" disabled class="custom-control-input  " id="' + isincidentmasterlocked + '"  name="' + isincidentmasterlocked + '"  checked>' +
                                '<label class="custom-control-label" for="' + isincidentmasterlocked + '" ></label>' +
                                '</div>';
                        } else {
                            return '<div class="custom-control custom-switch">' +
                                '<input type="checkbox"  disabled class="custom-control-input" id="' + isincidentmasterlocked + '"  name="' + isincidentmasterlocked + '"  >' +
                                '<label class="custom-control-label" for="' + isincidentmasterlocked + '" ></label>' +
                                '</div>';
                        }
                    },
                    targets: -1,
                }, 
                {
                    title: "Active",
                    className: 'isActive',
                    orderable: false,
                    data: null,
                    "render": function (data, type, full, meta) {
                        var isactive = full[3];
                        
                            if (isactive == 'true') {
                        var isincidentmasteractive="isincidentmasteractive"+full[0];
                            return '<div class="custom-control custom-switch">' +
                                '<input type="checkbox" disabled class="custom-control-input  " id="' + isincidentmasteractive + '"  name="' + isincidentmasteractive + '"  checked>' +
                                '<label class="custom-control-label" for="' + isincidentmasteractive + '" ></label>' +
                                '</div>';
                        } else {
                            return '<div class="custom-control custom-switch">' +
                                '<input type="checkbox"  disabled class="custom-control-input" id="' + isincidentmasteractive + '"  name="' + isincidentmasteractive + '"  >' +
                                '<label class="custom-control-label" for="' + isincidentmasteractive + '" ></label>' +
                                '</div>';
                        }
                        
                        
                       
                    },
                    targets: -1,
                }, 
                {
                    title: "Locked"
                }, 
                {
                    title: "Active"
                }, 
                ],
                "initComplete": function(settings, json) {
                  $("#"+incidentmastertableid + "_previous").addClass("customDataTables_pagePrev");
                  $("#"+incidentmastertableid + "_next").addClass("customDataTables_pageNext");
                         }, //initComplete
                "drawCallback": function( settings ) {
                  $("#"+incidentmastertableid + "_previous").addClass("customDataTables_pagePrev");
                  $("#"+incidentmastertableid + "_next").addClass("customDataTables_pageNext");
                           }

            });
            
            
           
                  addincidentmasteruser.clear();
              addincidentmasteruser.draw();
            addincidentmasteruser.rows.add(incidentmasteruserresults).draw();
            addincidentmasteruser.column(4).visible(false);
            addincidentmasteruser.column(5).visible(false);
 $('.buttons-excel')[0].style.visibility = false ? 'visible' : 'hidden'

            if(incidentmasteruserresults.length >0)
            {
                  $('#incidentmasteruserlist').show();
                  $('#exportincidentmasterusertoexcel').show();
                  $('#incidentmasteruserlist_toggle').show();
                  $('#Showincidentmasterusers').show();
                  $("#incidentmasteruserlist_toggle").toggle();
                  $("#exportincidentmasterusertoexcel").toggle();
            } 
            else
            {
                  $('#incidentmasteruserlist_toggle').hide();
                  $('#Showincidentmasterusers').hide();
                  $('#exportincidentmasterusertoexcel').hide();
            }
              



var incidentmasterclickBtn = false;

$(document).on('click', '#exportincidentmasterusertoexcel', function(event) { 

if(incidentmasterclickBtn == false){
    $(".incidentmasterbuttonsTocall").click(); 
    }
        incidentmasterclickBtn = true;

});





 $("#exportname").text('Incidentmaster - User List');
      }
      else
      {
  toastboxOpen("2008");
}
}

</script>



